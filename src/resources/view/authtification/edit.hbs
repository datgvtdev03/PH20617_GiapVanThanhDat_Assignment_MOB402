<div class="row">
  <div class="col-sm-4"></div>
  <div class="col-sm-5">
    <h1 class="text-center mt-4">Cập nhật tài khoản</h1>
    <form action="/authtification/{{user._id}}/?_method=PUT" method="POST" enctype="multipart/form-data">
      <div class="mb-3">
        <label for="exampleFormControlInput0" class="form-label">Tên tài khoản</label>
        <input type="text" class="form-control" id="exampleFormControlInput0" placeholder="Mời nhập tên"
          name="name" value="{{user.name}}" required>
      </div>
      <div class="mb-3">
        <label for="img" class="form-label">Hình ảnh</label>
        <img src="{{user.img}}" alt="" id="img-preview" class="form-control" style="height: 100px; width: 100px; margin-bottom: 10px;">
        <input type="file" class="form-control" id="avatar" name="img" accept="img/*">
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">Email</label>
        <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="Mời nhập gmail"
          name="email" value="{{user.email}}" required>
      </div>
      <div class="mb-3">
        <label for="inputPassword5" class="form-label">Mật khẩu</label>
        <input type="password" id="inputPassword5" class="form-control" aria-labelledby="passwordHelpBlock"
          placeholder="Mời nhập mật khẩu" name="password" required>
        <div id="passwordHelpBlock" class="form-text">
          Nhập độ dài mật khẩu từ 8 - 20 kí tự
        </div>
      </div>
      <button type="submit" class="btn btn-success mt-4 d-block mx-auto">Lưu</button>
    </form>
  </div>
</div>

<script>
  const avatarInput = document.getElementById('avatar');
  const imgPreview = document.getElementById('img-preview');

  avatarInput.addEventListener('change', () => {
    const file = avatarInput.files[0];
    const reader = new FileReader();

    reader.addEventListener("load", function () {
      imgPreview.src = reader.result;
    }, false);

    if (file) {
      reader.readAsDataURL(file);
    }
  });
</script>
